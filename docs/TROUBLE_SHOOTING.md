# Trouble Shooting
- 프로젝트를 진행하면서 발생한 문제점들과 해결법을 서술합니다.

## 다대다 관계에서 체크한 문제
~~기존에 다대일 관계로 member와 role의 권한을 나타냈고, List에 String 타입 형태가 기본이라 해서 
그대로 사용자 입력을 받아 작성하였습니다. 그러나 실제로 role도 여러 member가 가질 수 있고, DB가 많아지면서 확실한
관계를 나타내야 할 것 같아 다대다 관계를 시도해봤습니다. 또, 실제로 가입시 권한을 입력하는 경우는 거의 없기 때문에 
자동으로 부여되게 끔 수정하였습니다.~~ -> role 삭제, 추후 다른 다대다 관계에서 활용.

- 중복 테이블 문제 : List에 @ManyToMany를 붙이고, Hibernate로 관리하려 했더니 2개의 중복 테이블이 생겨서 
다음 방법으로 수정했습니다.
 
  1. @JoinTable - mappedBy : 부모 엔티티에 @JoinTable, 종속 엔티티에 mappedBy = 설정을 해서 관계를 명확히 했습니다.
  

- TransientObjectException : 영속성 컨텍스트에 연관된 엔티티가 자동으로 추가 되지 않아서 발생했고, cascade 설정을 통해
수정하였습니다.

  1. CascadeType.Persist, merge : 연관된 엔티티가 영속성 컨텍스트에 자동으로 추가되고 업데이트 되도록 수정하였습니다.


- LazyInitializationException : 로그인 시 1차로 비밀번호 검증, 2차로 토큰 발급을 하게 되는데 검증 후 세션이 닫혀
토큰 검증 시에 필요한 member의 권한을 가져오지 못해 발생하였습니다. 일단은 fetch 타입을 변경해서 즉시 로딩으로 수정하였습니다. 

  1. fetchType.EAGER : 지연 로딩을 즉시 로딩으로 변경하였습니다. 그러나 데이터가 커지면 전부 로딩하는 것에 성능 문제가 있어
다른 방식이 고려됩니다.